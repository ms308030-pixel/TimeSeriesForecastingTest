**1. 모델 설계 및 훈련 (Model Design & Training)**

1.1. 모델 아키텍처: GRU (Gated Recurrent Unit) 금융 시계열 데이터의 비선형성과 노이즈를 효과적으로 학습하기 위해 RNN 계열인 GRU 모델을 채택했습니다.

구조적 특징: LSTM(Long Short-Term Memory) 대비 게이트 구조가 단순하여 파라미터 수가 적습니다. 이는 데이터가 제한적인 금융 환경에서 연산 효율성을 높이고, 과적합(Overfitting) 위험을 줄이는 데 유리합니다.

Layer 구성: 단순한 1-Layer 구조 대신 2-Layer를 적용하여 시장의 복잡한 패턴과 장기 의존성(Long-term dependency)을 더 깊이 있게 학습하도록 설계했습니다.

하이퍼파라미터 설정: 모델의 표현력을 높이기 위해 은닉층(Hidden Size)을 기존 예제(64)의 두 배인 128로 확장하였으며, Dropout(0.2)을 적용하여 일반화 성능을 확보했습니다.

1.2. 훈련 과정 과거 가격 데이터의 시퀀스(Sequence)를 입력받아 **'다음 날 가격이 상승할 확률'**을 0과 1 사이의 값으로 예측하도록 학습했습니다. 손실 함수로는 이진 분류에 적합한 BCELoss를 사용했으며, 최적화 알고리즘은 Adam을 사용하여 수렴 속도를 높였습니다.

**2. 투자 전략 설계 및 적용 (Investment Strategy)**

2.1. 전략 개요: [Trend Following with Cut-Loss] 단순히 AI의 예측 확률에만 의존하는 것이 아니라, 기술적 분석과 자금 관리 원칙을 결합한 하이브리드(Hybrid) 전략을 수립했습니다.

2.2. 진입(Entry) 로직

조건 1 (AI 신호): 모델의 상승 예측 확률이 0.48 이상일 것. (기존 임계값 0.5보다 소폭 낮춰 매매 기회를 확대)

조건 2 (추세 필터): 현재 주가가 15일 이동평균선(MA15) 위에 위치할 것. (역배열 하락장에서의 저가 매수를 원천 차단하고, 확실한 상승 추세에서만 진입)

2.3. 청산(Exit) 및 리스크 관리 로직

손절매 (Stop Loss -2%): 진입가 대비 2% 하락 시 즉시 매도하여 손실을 짧게 확정 짓습니다. 이는 하락장에서 자산이 급격히 줄어드는 것을 방지하는 핵심 안전장치입니다.

익절 (Take Profit - No Limit): 상한선을 두지 않고 추세가 꺾일 때까지 포지션을 유지합니다. 이는 "손실은 짧게, 이익은 길게(Cut losses short, Let profits run)" 가져가는 퀀트 투자의 정석을 반영한 것입니다.

**`**3. 벤치마크 비교 및 분석 (Analysis)**`**

3.1. 성과 비교

벤치마크 (Buy and Hold): 시장의 등락을 그대로 반영하여, 특정 하락 구간(2024년 3~5월)에서 큰 자산 손실(MDD)을 겪으며 최종적으로 저조한 수익률을 기록했습니다.

제안 모델 (My Model): 최종 수익률 **93.11%**를 기록하며 벤치마크를 압도적으로 상회했습니다.

3.2. 성과 분석 (Why did it work?)

하락장 방어 (Defensive Alpha): 벤치마크가 무너질 때, 본 전략은 '이동평균선 필터'와 '-2% 손절 로직'이 작동하여 매매를 쉬거나 빠르게 현금화했습니다. 이로 인해 계좌가 횡보(Flat)하며 자산을 지킬 수 있었습니다.

상승장 편승 (Offensive Alpha): 2024년 11월 이후 발생한 강한 상승 랠리에서 '익절 제한 없음' 전략이 유효했습니다. AI가 높은 확신을 가질 때 추세의 끝까지 수익을 취함으로써 복리 효과를 극대화했습니다.

3.3. 결론 및 고찰 본 프로젝트를 통해 **"예측 정확도(Accuracy)보다 중요한 것은 대응 전략(Strategy)"**임을 확인했습니다. 모델이 완벽하지 않더라도, 추세 추종과 철저한 손절 원칙이 결합된다면 시장 수익률을 초과하는 알파를 창출할 수 있음을 입증했습니다. 다만, 실전 매매에서는 슬리피지(Slippage)로 인해 백테스트보다 손절 폭이 커질 수 있으므로, 향후 동적 손절(Dynamic Stop Loss) 등의 고도화가 필요할 것입니다.

**4. 자신만의 모델 및 전략 개발 ⭐**

1. 모델 아키텍처:

기반 모델: nn.GRU (Gated Recurrent Unit)

구조: Input Layer → GRU Layer (2-layers, Hidden Size 128) → Dropout (0.2) → Fully Connected Layer → Sigmoid Activation

특징: 기존 LSTM 대비 파라미터 수가 적어 연산 효율이 높으며, 시계열 데이터의 장기 의존성(Long-term dependency) 학습에 최적화됨.

2. 선택 이유:

데이터 효율성: 주가 데이터는 노이즈가 많아 복잡한 LSTM보다 구조가 단순한 GRU가 과적합(Overfitting) 위험이 적고 일반화 성능이 우수하다고 판단함.

모델 용량 확대: 예제(Hidden 64)보다 뉴런 수를 128로, 층(Layer)을 2개로 늘려 더 복잡한 비선형 시장 패턴을 학습할 수 있도록 설계함.

3. 트레이딩 전략:

전략명: "Trend Following with Risk Control" (추세 추종 + 손절 관리)

진입 조건(Entry):

AI 예측 확률 > 0.48 (다소 완화된 기준을 적용하여 거래 기회 포착)

현재 주가 > 15일 이동평균선 (상승 추세가 확인된 구간에서만 진입)

청산 조건(Exit):

손절매(Stop Loss): -2% (진입가 대비 2% 하락 시 즉시 매도하여 손실 최소화)

익절(Take Profit): 무제한(No Limit) (상승 추세가 꺾일 때까지 수익을 끝까지 가져가 손익비 극대화)

자금 관리: 확신 구간에서 자산의 100% 투입 (레버리지 1배, Position Scaling 미사용)

4. 하이퍼파라미터:

hidden_size: 128

learning_rate: 0.001

threshold: 0.48 (기존 0.5보다 낮춰 반응성 높임)

position_scaling: False (확실한 기회에 100% 진입)

5. 예제와의 차별점:

기술적 지표 결합: 단순히 AI 예측값만 믿지 않고, 이동평균선(SMA 15) 필터를 추가하여 하락장 매수를 원천 차단함.

리스크 관리 강화: 예제에는 없던 Stop Loss(-2%) 로직을 도입하여 MDD(최대 낙폭)를 획기적으로 줄임.

손익비 개선: '조금씩 자주 먹는' 전략 대신, '손실은 짧게(-2%) 끊고 이익은 길게(Trend)' 가져가는 퀀트 정석 전략을 구현함.

**5. 결과 분석 및 고찰 📊**

1. 모델 성능 분석
Buy and Hold 대비 수익률: 단순 보유(Buy and Hold) 시 시장의 높은 변동성에 그대로 노출되어 불안정한 흐름을 보인 반면, 본 모델 전략은 최종 수익률 93.11%를 기록하며 벤치마크를 크게 상회했습니다. 특히 하락장에서 손실을 방어(Flat)하고 상승장에서 수익을 극대화하여 양의 알파(Alpha)를 창출했습니다.

모델 예측 정확도: 단순 정확도(Accuracy)보다는 수익에 기여하는 정밀도(Precision)에 집중했습니다. GRU 모델의 예측 확률이 0.48 이상이더라도, 기술적 지표(이동평균선)와 결합하여 '거짓 신호(False Signal)'를 필터링함으로써 실질적인 매매 승률을 높였습니다.

주요 성공/실패 시기:

성공: 2024년 11월 이후 강한 상승 추세에서 '익절 제한 없음(No Limit)' 전략이 유효하여 수익률이 급격히 상승했습니다.

방어(성공적 실패): 2024년 3~5월 하락장 구간에서 모델은 매수 신호를 보내지 않거나, 진입하더라도 -2% 손절 원칙에 의해 즉시 청산하여 자산을 보존했습니다.

2. 트레이딩 전략 분석
선택한 전략: [Trend Following with Cut-Loss] AI 예측 확률(>0.48)과 15일 이동평균선(MA15)을 결합한 추세 추종 전략에, -2% 손절매(Stop Loss)와 무제한 익절(Trailing Profit 성격)을 적용했습니다.

전략의 장단점:

장점: '손실은 짧게, 이익은 길게(Cut losses short, Let profits run)'라는 퀀트 투자의 정석을 구현하여 손익비(Risk-Reward Ratio)가 매우 뛰어납니다. 하락장에서 현금을 보유하여 MDD(최대 낙폭)를 획기적으로 낮췄습니다.

단점: 횡보장(Box권)에서는 잦은 손절(-2%)로 인해 '톱니바퀴 효과(Whipsaw)'가 발생하여 자산이 소폭 감소할 수 있습니다.

수수료 영향: 회전율이 높은 단기 매매 전략 특성상 수수료 부담이 존재하나, 추세 추종 성공 시 발생하는 큰 수익 폭(20~30% 이상)이 잦은 손절 비용과 거래 수수료를 충분히 상쇄함을 확인했습니다.

3. 모델 설계
아키텍처 선택 이유: 금융 시계열 데이터의 노이즈와 장기 의존성(Long-term dependency)을 학습하기 위해 RNN 계열을 선택했습니다. 그중 LSTM보다 파라미터 수가 적어 연산 효율이 좋고, 적은 데이터셋에서도 과적합(Overfitting) 위험이 상대적으로 낮은 GRU(Gated Recurrent Unit)를 채택했습니다.

하이퍼파라미터 튜닝:

Hidden Size: 예제(64)보다 큰 128로 설정하여 모델의 표현력을 높였습니다.

Threshold: 0.5라는 고정관념을 깨고 0.48로 하향 조정하되, 이동평균선 필터를 추가하여 민감도와 안정성의 균형을 맞췄습니다.

예제 모델과의 차이점: 예제 코드는 단순 AI 확률에만 의존하여 하락장에서도 매수하는 치명적 단점이 있었으나, 본 모델은 기술적 지표(MA)와 자금 관리(Stop Loss) 로직을 결합한 하이브리드(Hybrid) 시스템으로 구축하여 실전성을 강화했습니다.

1. 개선 방향
모델의 한계점: 이동평균선을 사용하므로 급등/급락 시 진입과 청산이 한 템포 늦는 후행성(Lagging) 문제가 존재합니다. 또한, 백테스트상의 -2% 손절은 실전 급락장에서 슬리피지(Slippage)로 인해 -3~4% 손실로 이어질 수 있습니다.

추가 실험 아이디어: 고정된 익절/손절 비율 대신, 시장의 변동성(ATR 지표 등)에 따라 유동적으로 변하는 동적 손절(Dynamic Stop Loss) 및 트레일링 스탑(Trailing Stop) 도입을 고려해볼 수 있습니다.

실전 적용 시 고려사항: 과적합(Overfitting)을 방지하기 위해 2024년 외의 다른 연도(2022년 하락장, 2023년 횡보장) 데이터로 교차 검증(Cross Validation)이 필수적이며, 소액 실전 매매를 통해 슬리피지와 체결 오차를 점검해야 합니다.
